var _, assert, chai, expect, fs, moment, path, s3BrowserUpload, sinon, sinonChai;

_ = require('lodash');

fs = require('fs');

moment = require('moment');

chai = require('chai');

path = require('path');

sinon = require('sinon');

sinonChai = require('sinon-chai');

assert = chai.assert;

expect = chai.expect;

chai.use(sinonChai);

s3BrowserUpload = require('../lib');

describe('s3-uploadPostForm tests', function() {
  describe('#uploadPostForm tests', function() {
    var s3client;
    s3client = null;
    before(function() {
      return s3client = new s3BrowserUpload({
        accessKeyId: 'rHiziprP5FLOL5DpLaRc',
        secretAccessKey: 'dGudXJxDvtgZ2oRvzuMY1uWA/tsziUXwkd3tnJBk',
        signatureVersion: "v4",
        region: "eu-central-1"
      });
    });
    return it('should return json with all parameters required to build a form', function(done) {
      var uploadPostFormOptions;
      uploadPostFormOptions = {
        key: "testKey.jpg",
        bucket: 'testBucket',
        expires: moment().add(60, 'minutes').toDate(),
        extension: 'jpg'
      };
      return s3client.uploadPostForm(uploadPostFormOptions, function(err, params) {
        expect(params).to.have.deep.property('params.key');
        expect(params).to.have.deep.property('params.acl');
        expect(params).to.have.deep.property('params.content-type');
        expect(params).to.have.deep.property('params.x-amz-algorithm');
        expect(params).to.have.deep.property('params.x-amz-credential');
        expect(params).to.have.deep.property('params.x-amz-date');
        expect(params).to.have.deep.property('params.policy');
        expect(params).to.have.deep.property('params.x-amz-signature');
        expect(params).to.have.deep.property('public_url');
        expect(params).to.have.deep.property('form_url');
        return done();
      });
    });
  });
  describe('#upload tests', function() {
    var s3client;
    s3client = null;
    before(function() {
      s3client = new s3BrowserUpload({
        accessKeyId: 'rHiziprP5FLOL5DpLaRc',
        secretAccessKey: 'dGudXJxDvtgZ2oRvzuMY1uWA/tsziUXwkd3tnJBk',
        signatureVersion: "v4",
        region: "eu-central-1"
      });
      return sinon.stub(s3client.s3, 'upload', function(params, cb) {
        return cb();
      });
    });
    after(function() {
      return s3client.s3.upload.restore();
    });
    return it('should return url of uploaded file', function(done) {
      var uploadOptions;
      uploadOptions = {
        data: "String Object data",
        key: "testKey.txt",
        bucket: 'testBucket',
        extension: 'txt',
        acl: 'public-read'
      };
      return s3client.upload(uploadOptions, function(err, url) {
        expect(url).to.exists;
        expect(url).to.equal('https://testBucket.s3.amazonaws.com/testKey.txt');
        return done();
      });
    });
  });
  return describe('#put tests', function() {
    var s3client;
    s3client = null;
    before(function() {
      s3client = new s3BrowserUpload({
        accessKeyId: 'rHiziprP5FLOL5DpLaRc',
        secretAccessKey: 'dGudXJxDvtgZ2oRvzuMY1uWA/tsziUXwkd3tnJBk',
        signatureVersion: "v4",
        region: "eu-central-1"
      });
      return sinon.stub(s3client.s3, 'getSignedUrl', function(typeName, params, cb) {
        return cb(null, 'https://testBucket.s3.amazonaws.com/testKey.txt');
      });
    });
    after(function() {
      return s3client.s3.getSignedUrl.restore();
    });
    return it('should return json with signed and public urls', function(done) {
      var uploadOptions;
      uploadOptions = {
        key: "testKey.txt",
        bucket: 'testBucket',
        extension: 'txt',
        acl: 'public-read'
      };
      return s3client.put(uploadOptions, function(err, urls) {
        expect(urls).to.have.property('signed_url');
        expect(urls).to.have.property('public_url');
        return done();
      });
    });
  });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvaW5kZXguY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsNEVBQUE7O0FBQUEsQ0FBQSxHQUFjLE9BQUEsQ0FBUSxRQUFSLENBQWQsQ0FBQTs7QUFBQSxFQUNBLEdBQWMsT0FBQSxDQUFRLElBQVIsQ0FEZCxDQUFBOztBQUFBLE1BRUEsR0FBYyxPQUFBLENBQVEsUUFBUixDQUZkLENBQUE7O0FBQUEsSUFJQSxHQUFjLE9BQUEsQ0FBUSxNQUFSLENBSmQsQ0FBQTs7QUFBQSxJQUtBLEdBQWMsT0FBQSxDQUFRLE1BQVIsQ0FMZCxDQUFBOztBQUFBLEtBTUEsR0FBYyxPQUFBLENBQVEsT0FBUixDQU5kLENBQUE7O0FBQUEsU0FPQSxHQUFjLE9BQUEsQ0FBUSxZQUFSLENBUGQsQ0FBQTs7QUFBQSxNQVNBLEdBQVksSUFBSSxDQUFDLE1BVGpCLENBQUE7O0FBQUEsTUFVQSxHQUFZLElBQUksQ0FBQyxNQVZqQixDQUFBOztBQUFBLElBWUksQ0FBQyxHQUFMLENBQVMsU0FBVCxDQVpBLENBQUE7O0FBQUEsZUFjQSxHQUFrQixPQUFBLENBQVEsUUFBUixDQWRsQixDQUFBOztBQUFBLFFBa0JBLENBQVMseUJBQVQsRUFBb0MsU0FBQSxHQUFBO0FBRWxDLEVBQUEsUUFBQSxDQUFTLHVCQUFULEVBQWtDLFNBQUEsR0FBQTtBQUVoQyxRQUFBLFFBQUE7QUFBQSxJQUFBLFFBQUEsR0FBVyxJQUFYLENBQUE7QUFBQSxJQUVBLE1BQUEsQ0FBTyxTQUFBLEdBQUE7YUFDTCxRQUFBLEdBQWUsSUFBQSxlQUFBLENBQ2I7QUFBQSxRQUFBLFdBQUEsRUFBYSxzQkFBYjtBQUFBLFFBQ0EsZUFBQSxFQUFpQiwwQ0FEakI7QUFBQSxRQUVBLGdCQUFBLEVBQWtCLElBRmxCO0FBQUEsUUFHQSxNQUFBLEVBQVEsY0FIUjtPQURhLEVBRFY7SUFBQSxDQUFQLENBRkEsQ0FBQTtXQVNBLEVBQUEsQ0FBRyxpRUFBSCxFQUFzRSxTQUFDLElBQUQsR0FBQTtBQUNw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Q0FBeEMsRUFQSztJQUFBLENBQVAsQ0FGQSxDQUFBO0FBQUEsSUFZQSxLQUFBLENBQU0sU0FBQSxHQUFBO2FBQ0osUUFBUSxDQUFDLEVBQUUsQ0FBQyxZQUFZLENBQUMsT0FBekIsQ0FBQSxFQURJO0lBQUEsQ0FBTixDQVpBLENBQUE7V0FlQSxFQUFBLENBQUcsZ0RBQUgsRUFBcUQsU0FBQyxJQUFELEdBQUE7QUFDbkQsVUFBQSxhQUFBO0FBQUEsTUFBQSxhQUFBLEdBQ0U7QUFBQSxRQUFBLEdBQUEsRUFBSyxhQUFMO0FBQUEsUUFDQSxNQUFBLEVBQVEsWUFEUjtBQUFBLFFBRUEsU0FBQSxFQUFXLEtBRlg7QUFBQSxRQUdBLEdBQUEsRUFBSyxhQUhMO09BREYsQ0FBQTthQU1BLFFBQVEsQ0FBQyxHQUFULENBQWEsYUFBYixFQUE0QixTQUFDLEdBQUQsRUFBTSxJQUFOLEdBQUE7QUFDMUIsUUFBQSxNQUFBLENBQU8sSUFBUCxDQUFZLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxRQUFyQixDQUE4QixZQUE5QixDQUFBLENBQUE7QUFBQSxRQUNBLE1BQUEsQ0FBTyxJQUFQLENBQVksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQXJCLENBQThCLFlBQTlCLENBREEsQ0FBQTtlQUVBLElBQUEsQ0FBQSxFQUgwQjtNQUFBLENBQTVCLEVBUG1EO0lBQUEsQ0FBckQsRUFqQnFCO0VBQUEsQ0FBdkIsRUFoRWtDO0FBQUEsQ0FBcEMsQ0FsQkEsQ0FBQSIsImZpbGUiOiJ0ZXN0L2luZGV4LmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIiwic291cmNlc0NvbnRlbnQiOlsiXyAgICAgICAgICAgPSByZXF1aXJlKCdsb2Rhc2gnKVxuZnMgICAgICAgICAgPSByZXF1aXJlKCdmcycpXG5tb21lbnQgICAgICA9IHJlcXVpcmUoJ21vbWVudCcpXG5cbmNoYWkgICAgICAgID0gcmVxdWlyZSgnY2hhaScpXG5wYXRoICAgICAgICA9IHJlcXVpcmUoJ3BhdGgnKVxuc2lub24gICAgICAgPSByZXF1aXJlKCdzaW5vbicpXG5zaW5vbkNoYWkgICA9IHJlcXVpcmUoJ3Npbm9uLWNoYWknKVxuXG5hc3NlcnQgICAgPSBjaGFpLmFzc2VydFxuZXhwZWN0ICAgID0gY2hhaS5leHBlY3RcblxuY2hhaS51c2Uoc2lub25DaGFpKVxuXG5zM0Jyb3dzZXJVcGxvYWQgPSByZXF1aXJlKCcuLi9saWInKVxuXG5cbiMgVEVTVFNcbmRlc2NyaWJlICdzMy11cGxvYWRQb3N0Rm9ybSB0ZXN0cycsICgpIC0+XG5cbiAgZGVzY3JpYmUgJyN1cGxvYWRQb3N0Rm9ybSB0ZXN0cycsICgpIC0+XG5cbiAgICBzM2NsaWVudCA9IG51bGxcblxuICAgIGJlZm9yZSAtPlxuICAgICAgczNjbGllbnQgPSBuZXcgczNCcm93c2VyVXBsb2FkXG4gICAgICAgIGFjY2Vzc0tleUlkOiAnckhpemlwclA1RkxPTDVEcExhUmMnXG4gICAgICAgIHNlY3JldEFjY2Vzc0tleTogJ2RHdWRYSnhEdnRnWjJvUnZ6dU1ZMXVXQS90c3ppVVh3a2QzdG5KQmsnXG4gICAgICAgIHNpZ25hdHVyZVZlcnNpb246IFwidjRcIlxuICAgICAgICByZWdpb246IFwiZXUtY2VudHJhbC0xXCJcblxuICAgIGl0ICdzaG91bGQgcmV0dXJuIGpzb24gd2l0aCBhbGwgcGFyYW1ldGVycyByZXF1aXJlZCB0byBidWlsZCBhIGZvcm0nLCAoZG9uZSkgLT5cbiAgICAgIHVwbG9hZFBvc3RGb3JtT3B0aW9ucyA9XG4gICAgICAgIGtleTogXCJ0ZXN0S2V5LmpwZ1wiXG4gICAgICAgIGJ1Y2tldDogJ3Rlc3RCdWNrZXQnXG4gICAgICAgIGV4cGlyZXM6IG1vbWVudCgpLmFkZCg2MCwgJ21pbnV0ZXMnKS50b0RhdGUoKVxuICAgICAgICBleHRlbnNpb246ICdqcGcnXG5cbiAgICAgIHMzY2xpZW50LnVwbG9hZFBvc3RGb3JtIHVwbG9hZFBvc3RGb3JtT3B0aW9ucywgKGVyciwgcGFyYW1zKSAtPlxuICAgICAgICBleHBlY3QocGFyYW1zKS50by5oYXZlLmRlZXAucHJvcGVydHkgJ3BhcmFtcy5rZXknXG4gICAgICAgIGV4cGVjdChwYXJhbXMpLnRvLmhhdmUuZGVlcC5wcm9wZXJ0eSAncGFyYW1zLmFjbCdcbiAgICAgICAgZXhwZWN0KHBhcmFtcykudG8uaGF2ZS5kZWVwLnByb3BlcnR5ICdwYXJhbXMuY29udGVudC10eXBlJ1xuICAgICAgICBleHBlY3QocGFyYW1zKS50by5oYXZlLmRlZXAucHJvcGVydHkgJ3BhcmFtcy54LWFtei1hbGdvcml0aG0nXG4gICAgICAgIGV4cGVjdChwYXJhbXMpLnRvLmhhdmUuZGVlcC5wcm9wZXJ0eSAncGFyYW1zLngtYW16LWNyZWRlbnRpYWwnXG4gICAgICAgIGV4cGVjdChwYXJhbXMpLnRvLmhhdmUuZGVlcC5wcm9wZXJ0eSAncGFyYW1zLngtYW16LWRhdGUnXG4gICAgICAgIGV4cGVjdChwYXJhbXMpLnRvLmhhdmUuZGVlcC5wcm9wZXJ0eSAncGFyYW1zLnBvbGljeSdcbiAgICAgICAgZXhwZWN0KHBhcmFtcykudG8uaGF2ZS5kZWVwLnByb3BlcnR5ICdwYXJhbXMueC1hbXotc2lnbmF0dXJlJ1xuICAgICAgICBleHBlY3QocGFyYW1zKS50by5oYXZlLmRlZXAucHJvcGVydHkgJ3B1YmxpY191cmwnXG4gICAgICAgIGV4cGVjdChwYXJhbXMpLnRvLmhhdmUuZGVlcC5wcm9wZXJ0eSAnZm9ybV91cmwnXG5cbiAgICAgICAgZG9uZSgpXG5cbiAgZGVzY3JpYmUgJyN1cGxvYWQgdGVzdHMnLCAoKSAtPlxuXG4gICAgczNjbGllbnQgPSBudWxsXG5cbiAgICBiZWZvcmUgLT5cbiAgICAgIHMzY2xpZW50ID0gbmV3IHMzQnJvd3NlclVwbG9hZFxuICAgICAgICBhY2Nlc3NLZXlJZDogJ3JIaXppcHJQNUZMT0w1RHBMYVJjJ1xuICAgICAgICBzZWNyZXRBY2Nlc3NLZXk6ICdkR3VkWEp4RHZ0Z1oyb1J2enVNWTF1V0EvdHN6aVVYd2tkM3RuSkJrJ1xuICAgICAgICBzaWduYXR1cmVWZXJzaW9uOiBcInY0XCJcbiAgICAgICAgcmVnaW9uOiBcImV1LWNlbnRyYWwtMVwiXG5cbiAgICAgIHNpbm9uLnN0dWIgczNjbGllbnQuczMsICd1cGxvYWQnLCAocGFyYW1zLCBjYikgLT5cbiAgICAgICAgY2IoKVxuXG4gICAgYWZ0ZXIgLT5cbiAgICAgIHMzY2xpZW50LnMzLnVwbG9hZC5yZXN0b3JlKClcblxuICAgIGl0ICdzaG91bGQgcmV0dXJuIHVybCBvZiB1cGxvYWRlZCBmaWxlJywgKGRvbmUpIC0+XG4gICAgICB1cGxvYWRPcHRpb25zID1cbiAgICAgICAgZGF0YTogXCJTdHJpbmcgT2JqZWN0IGRhdGFcIlxuICAgICAgICBrZXk6IFwidGVzdEtleS50eHRcIlxuICAgICAgICBidWNrZXQ6ICd0ZXN0QnVja2V0J1xuICAgICAgICBleHRlbnNpb246ICd0eHQnXG4gICAgICAgIGFjbDogJ3B1YmxpYy1yZWFkJ1xuXG4gICAgICBzM2NsaWVudC51cGxvYWQgdXBsb2FkT3B0aW9ucywgKGVyciwgdXJsKSAtPlxuICAgICAgICBleHBlY3QodXJsKS50by5leGlzdHNcbiAgICAgICAgZXhwZWN0KHVybCkudG8uZXF1YWwgJ2h0dHBzOi8vdGVzdEJ1Y2tldC5zMy5hbWF6b25hd3MuY29tL3Rlc3RLZXkudHh0J1xuICAgICAgICBkb25lKClcblxuICBkZXNjcmliZSAnI3B1dCB0ZXN0cycsICgpIC0+XG5cbiAgICBzM2NsaWVudCA9IG51bGxcblxuICAgIGJlZm9yZSAtPlxuICAgICAgczNjbGllbnQgPSBuZXcgczNCcm93c2VyVXBsb2FkXG4gICAgICAgIGFjY2Vzc0tleUlkOiAnckhpemlwclA1RkxPTDVEcExhUmMnXG4gICAgICAgIHNlY3JldEFjY2Vzc0tleTogJ2RHdWRYSnhEdnRnWjJvUnZ6dU1ZMXVXQS90c3ppVVh3a2QzdG5KQmsnXG4gICAgICAgIHNpZ25hdHVyZVZlcnNpb246IFwidjRcIlxuICAgICAgICByZWdpb246IFwiZXUtY2VudHJhbC0xXCJcblxuICAgICAgc2lub24uc3R1YiBzM2NsaWVudC5zMywgJ2dldFNpZ25lZFVybCcsICh0eXBlTmFtZSwgcGFyYW1zLCBjYikgLT5cbiAgICAgICAgY2IobnVsbCwgJ2h0dHBzOi8vdGVzdEJ1Y2tldC5zMy5hbWF6b25hd3MuY29tL3Rlc3RLZXkudHh0JylcblxuICAgIGFmdGVyIC0+XG4gICAgICBzM2NsaWVudC5zMy5nZXRTaWduZWRVcmwucmVzdG9yZSgpXG5cbiAgICBpdCAnc2hvdWxkIHJldHVybiBqc29uIHdpdGggc2lnbmVkIGFuZCBwdWJsaWMgdXJscycsIChkb25lKSAtPlxuICAgICAgdXBsb2FkT3B0aW9ucyA9XG4gICAgICAgIGtleTogXCJ0ZXN0S2V5LnR4dFwiXG4gICAgICAgIGJ1Y2tldDogJ3Rlc3RCdWNrZXQnXG4gICAgICAgIGV4dGVuc2lvbjogJ3R4dCdcbiAgICAgICAgYWNsOiAncHVibGljLXJlYWQnXG5cbiAgICAgIHMzY2xpZW50LnB1dCB1cGxvYWRPcHRpb25zLCAoZXJyLCB1cmxzKSAtPlxuICAgICAgICBleHBlY3QodXJscykudG8uaGF2ZS5wcm9wZXJ0eSAnc2lnbmVkX3VybCdcbiAgICAgICAgZXhwZWN0KHVybHMpLnRvLmhhdmUucHJvcGVydHkgJ3B1YmxpY191cmwnXG4gICAgICAgIGRvbmUoKVxuXG5cblxuXG4iXX0=